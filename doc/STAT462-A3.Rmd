
---
title: 
  "STAT462 Assignment 3"
author: 
  - Xia Yu (62380486)
  - David Ewing (82171165)
date: "`r format(Sys.time(), '%Y-%m-%d %H:%M')`"
output:
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
options(repos = c(CRAN = "https://cran.stat.auckland.ac.nz/"))
required_packages <- c("conflicted", "ggplot2", "dplyr", "plotly", "tidyr",
                       "caret", "knitr", "reshape2", "readr", "tidyverse",
                       "skimr", "pROC", "MASS")
for (pkg in required_packages) {
  if (!requireNamespace(pkg, quietly = TRUE)) install.packages(pkg)
  library(pkg, character.only = TRUE)
}

library(conflicted)
conflicts_prefer(
  dplyr::filter,
  dplyr::select,
  tidyr::expand,
  plotly::layout,
  pROC::auc
)

knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE, width = 70)
knitr::opts_knit$set(root.dir = getwd())
```

## Data extraction

```{r data-extraction, include=FALSE}
# ---- helper: unzip only if needed, with messages --------------------------
# ---- set message=T to see the messages for debugging ----------------------

ensure_unzipped <- function(zip_path,
                            files_to_extract,
                            dest_dir = "../data/unzipped") {

  if (!file.exists(zip_path)) {
    stop(sprintf("✖  ZIP archive not found at: %s", zip_path))
  }

  if (!dir.exists(dest_dir)) dir.create(dest_dir, recursive = TRUE)

  for (f in files_to_extract) {
    target <- file.path(dest_dir, f)
    if (file.exists(target)) {
      message(sprintf("✓ File previously unzipped: %s", f))
    } else {
      message(sprintf("→ Unzipping file: %s", f))
      utils::unzip(zipfile = zip_path,
                   files     = f,
                   exdir     = dest_dir,
                   overwrite = FALSE)
    }
  }
  invisible(TRUE)
}

# ---- run it ---------------------------------------------------------------
ensure_unzipped(
  zip_path        = "../data/data_assignment_3.zip",
  files_to_extract = c("rocks.csv",
                       "rocks_unlabelled.csv",
                       "seeds.csv",
                       "seeds_annotated.csv")
)

```

## Question&nbsp;1

```{r child-Q1, child = "./Q1.Rmd"}
```

## Question&nbsp;2

```{r child-Q2, child = "./Q2.Rmd"}
```
